import{u as g,a as p,r as c,j as e,B as s,h as i,C as o,b as l,d,e as h,f as u}from"./index-DimZnVXS.js";function w(){const{toast:t}=g(),[C,a]=p(),[x,m]=c.useState(!0),[j,f]=c.useState(!1);c.useEffect(()=>{async function r(){try{const n=await fetch("/api/admin/check-auth",{credentials:"include"});if(!n.ok)throw new Error("Falha ao verificar autenticação");if(!(await n.json()).authenticated){a("/admin/login");return}f(!0)}catch(n){console.error("Authentication error:",n),a("/admin/login")}finally{m(!1)}}r()},[a,t]);const v=async()=>{try{if(!(await fetch("/api/admin/logout",{method:"POST",credentials:"include"})).ok)throw new Error("Falha ao fazer logout");t({title:"Logout realizado",description:"Você saiu do painel administrativo com sucesso."}),a("/admin/login")}catch(r){console.error("Logout error:",r),t({title:"Erro",description:"Ocorreu um erro ao fazer logout.",variant:"destructive"})}};return x?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{children:"Verificando autenticação..."})}):j?e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("header",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Painel Administrativo"}),e.jsxs("nav",{className:"flex items-center space-x-2",children:[e.jsx(s,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(i,{href:"/admin/dashboard",children:"Dashboard"})}),e.jsx(s,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(i,{href:"/admin/services",children:"Serviços"})}),e.jsx(s,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(i,{href:"/admin/images",children:"Imagens"})}),e.jsx(s,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(i,{href:"/",children:"Voltar ao site"})}),e.jsx(s,{variant:"destructive",size:"sm",onClick:v,children:"Sair"})]})]})})}),e.jsxs("main",{className:"container mx-auto p-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(o,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Gerenciar Serviços"}),e.jsx(h,{children:"Adicione, edite ou remova serviços oferecidos"})]}),e.jsx(u,{children:e.jsx(s,{asChild:!0,className:"w-full",children:e.jsx(i,{href:"/admin/services",children:"Gerenciar Serviços"})})})]}),e.jsxs(o,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Gerenciar Imagens"}),e.jsx(h,{children:"Atualize as imagens exibidas no site"})]}),e.jsx(u,{children:e.jsx(s,{asChild:!0,className:"w-full",children:e.jsx(i,{href:"/admin/images",children:"Gerenciar Imagens"})})})]}),e.jsxs(o,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Voltar ao Site"}),e.jsx(h,{children:"Visualizar o site como visitante"})]}),e.jsx(u,{children:e.jsx(s,{asChild:!0,className:"w-full",variant:"outline",children:e.jsx(i,{href:"/",children:"Visualizar Site"})})})]})]})]})]}):null}export{w as default};
